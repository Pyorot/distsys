0 loaded state | currentTerm= 0 | votedFor= -1 | log= [{0 <nil>}]
0 → follower | init
1 loaded state | currentTerm= 0 | votedFor= -1 | log= [{0 <nil>}]
1 → follower | init
2 loaded state | currentTerm= 0 | votedFor= -1 | log= [{0 <nil>}]
2 → follower | init
Test (2C): partitioned leader and one follower crash, leader restarts ...
TEST: 101 goes in
1 input x 101
2 input x 101
0 input x 101
1 → candidate | timeout
1 x follower
RequestVote: 1 > 0
1 saved
1 requested votes | 1
RequestVote: 1 > 2
0 saved
0 - follower | tS fail (RequestVote receiver)
voter: index 0 term 0 | candidate: index: 0 term: 0
0 saved
RequestVote: 1 < 0 | 1 vs 0 | react true | vote: true
2 saved
2 - follower | tS fail (RequestVote receiver)
voter: index 0 term 0 | candidate: index: 0 term: 0
2 saved
RequestVote: 1 < 2 | 1 vs 0 | react true | vote: true
RequestVote: 1 - 0 | 1 vs 0
1 received votes
1 → leader | elected (2 votes; term 1)
H> 1 1 1
AppendEntries: 1 > 0
AppendEntries: 1 > 2
RequestVote: 1 - 2 | 1 vs 0
0 saved
AppendEntries: 1 < 0 | 1 vs 1 | react true | success true
0 - follower | reset
2 - follower | reset
2 saved
AppendEntries: 1 < 2 | 1 vs 1 | react true | success true
AppendEntries: 1 - 0 | 1 vs 1
AppendEntries: 1 - 2 | 1 vs 1
1 input o 1 101
H< 1 1 1
H- 1 1 1 | next [1 1 1] | match [0 0 0] | commit 0 | log [{0 <nil>} {1 101}] | time 0.0507597
H> 1 1 2
AppendEntries: 1 > 2
AppendEntries: 1 > 0
0 saved
2 - follower | reset
AppendEntries: 1 < 0 | 1 vs 1 | react true | success true
0 - follower | reset
2 saved
AppendEntries: 1 < 2 | 1 vs 1 | react true | success true
AppendEntries: 1 - 0 | 1 vs 1
AppendEntries: 1 - 2 | 1 vs 1
H< 1 1 2
H- 1 1 2 | next [2 1 2] | match [1 0 1] | commit 1 | log [{0 <nil>} {1 101}] | time 0.0508911
H> 1 1 3
AppendEntries: 1 > 2
1 output 1 : 101
AppendEntries: 1 > 0
0 - follower | reset
2 saved
AppendEntries: 1 < 2 | 1 vs 1 | react true | success true
0 saved
AppendEntries: 1 < 0 | 1 vs 1 | react true | success true
AppendEntries: 1 - 2 | 1 vs 1
2 output 1 : 101
AppendEntries: 1 - 0 | 1 vs 1
2 - follower | reset
0 output 1 : 101
H< 1 1 3
H- 1 1 3 | next [2 1 2] | match [1 0 1] | commit 1 | log [{0 <nil>} {1 101}] | time 0.0508785
H> 1 1 4
AppendEntries: 1 > 2
AppendEntries: 1 > 0
0 saved
AppendEntries: 1 < 0 | 1 vs 1 | react true | success true
2 saved
AppendEntries: 1 < 2 | 1 vs 1 | react true | success true
0 - follower | reset
2 - follower | reset
AppendEntries: 1 - 0 | 1 vs 1
AppendEntries: 1 - 2 | 1 vs 1
H< 1 1 4
H- 1 1 4 | next [2 1 2] | match [1 0 1] | commit 1 | log [{0 <nil>} {1 101}] | time 0.0508581
H> 1 1 5
AppendEntries: 1 > 2
AppendEntries: 1 > 0
2 saved
AppendEntries: 1 < 2 | 1 vs 1 | react true | success true
0 saved
AppendEntries: 1 < 0 | 1 vs 1 | react true | success true
0 - follower | reset
2 - follower | reset
AppendEntries: 1 - 2 | 1 vs 1
AppendEntries: 1 - 0 | 1 vs 1
H< 1 1 5
H- 1 1 5 | next [2 1 2] | match [1 0 1] | commit 1 | log [{0 <nil>} {1 101}] | time 0.0508365
H> 1 1 6
AppendEntries: 1 > 2
AppendEntries: 1 > 0
0 - follower | reset
0 saved
AppendEntries: 1 < 0 | 1 vs 1 | react true | success true
2 - follower | reset
2 saved
AppendEntries: 1 < 2 | 1 vs 1 | react true | success true
AppendEntries: 1 - 0 | 1 vs 1
AppendEntries: 1 - 2 | 1 vs 1
H< 1 1 6
H- 1 1 6 | next [2 1 2] | match [1 0 1] | commit 1 | log [{0 <nil>} {1 101}] | time 0.0519321
H> 1 1 7
AppendEntries: 1 > 2
AppendEntries: 1 > 0
0 saved
AppendEntries: 1 < 0 | 1 vs 1 | react true | success true
2 - follower | reset
2 saved
AppendEntries: 1 < 2 | 1 vs 1 | react true | success true
0 - follower | reset
AppendEntries: 1 - 0 | 1 vs 1
AppendEntries: 1 - 2 | 1 vs 1
H< 1 1 7
H- 1 1 7 | next [2 1 2] | match [1 0 1] | commit 1 | log [{0 <nil>} {1 101}] | time 0.0508376
H> 1 1 8
AppendEntries: 1 > 2
AppendEntries: 1 > 0
2 - follower | reset
2 saved
AppendEntries: 1 < 2 | 1 vs 1 | react true | success true
0 - follower | reset
0 saved
AppendEntries: 1 < 0 | 1 vs 1 | react true | success true
AppendEntries: 1 - 2 | 1 vs 1
AppendEntries: 1 - 0 | 1 vs 1
H< 1 1 8
H- 1 1 8 | next [2 1 2] | match [1 0 1] | commit 1 | log [{0 <nil>} {1 101}] | time 0.0518576
H> 1 1 9
AppendEntries: 1 > 2
AppendEntries: 1 > 0
2 - follower | reset
2 saved
AppendEntries: 1 < 2 | 1 vs 1 | react true | success true
0 saved
AppendEntries: 1 < 0 | 1 vs 1 | react true | success true
0 - follower | reset
AppendEntries: 1 - 0 | 1 vs 1
AppendEntries: 1 - 2 | 1 vs 1
H< 1 1 9
H- 1 1 9 | next [2 1 2] | match [1 0 1] | commit 1 | log [{0 <nil>} {1 101}] | time 0.0518605
H> 1 1 10
AppendEntries: 1 > 2
AppendEntries: 1 > 0
2 saved
AppendEntries: 1 < 2 | 1 vs 1 | react true | success true
0 - follower | reset
2 - follower | reset
0 saved
AppendEntries: 1 < 0 | 1 vs 1 | react true | success true
AppendEntries: 1 - 2 | 1 vs 1
AppendEntries: 1 - 0 | 1 vs 1
H< 1 1 10
H- 1 1 10 | next [2 1 2] | match [1 0 1] | commit 1 | log [{0 <nil>} {1 101}] | time 0.0518616
H> 1 1 11
AppendEntries: 1 > 2
AppendEntries: 1 > 0
0 saved
AppendEntries: 1 < 0 | 1 vs 1 | react true | success true
2 - follower | reset
0 - follower | reset
2 saved
AppendEntries: 1 < 2 | 1 vs 1 | react true | success true
AppendEntries: 1 - 0 | 1 vs 1
AppendEntries: 1 - 2 | 1 vs 1
H< 1 1 11
H- 1 1 11 | next [2 1 2] | match [1 0 1] | commit 1 | log [{0 <nil>} {1 101}] | time 0.0508632
H> 1 1 12
AppendEntries: 1 > 2
AppendEntries: 1 > 0
0 - follower | reset
0 saved
AppendEntries: 1 < 0 | 1 vs 1 | react true | success true
2 saved
AppendEntries: 1 < 2 | 1 vs 1 | react true | success true
2 - follower | reset
AppendEntries: 1 - 0 | 1 vs 1
AppendEntries: 1 - 2 | 1 vs 1
H< 1 1 12
H- 1 1 12 | next [2 1 2] | match [1 0 1] | commit 1 | log [{0 <nil>} {1 101}] | time 0.0508996
H> 1 1 13
AppendEntries: 1 > 2
AppendEntries: 1 > 0
2 saved
AppendEntries: 1 < 2 | 1 vs 1 | react true | success true
0 - follower | reset
2 - follower | reset
0 saved
AppendEntries: 1 < 0 | 1 vs 1 | react true | success true
AppendEntries: 1 - 2 | 1 vs 1
AppendEntries: 1 - 0 | 1 vs 1
TEST: FOLLOWER 0 DISCONNECT
TEST: 102 goes in
1 input o 1 102
H< 1 1 13
H- 1 1 13 | next [2 1 2] | match [1 0 1] | commit 1 | log [{0 <nil>} {1 101} {1 102}] | time 0.0509201
H> 1 1 14
AppendEntries: 1 > 2
AppendEntries: 1 > 0
2 saved
AppendEntries: 1 < 2 | 1 vs 1 | react true | success true
2 - follower | reset
AppendEntries: 1 - 2 | 1 vs 1
H< 1 1 14
H- 1 1 14 | next [1 1 3] | match [1 0 2] | commit 2 | log [{0 <nil>} {1 101} {1 102}] | time 0.0517689
H> 1 1 15
AppendEntries: 1 > 2
1 output 2 : 102
AppendEntries: 1 > 0
0 - follower | reset
2 saved
AppendEntries: 1 < 2 | 1 vs 1 | react true | success true
2 output 2 : 102
AppendEntries: 1 - 2 | 1 vs 1
TEST: LEADER 1 CRASH
1 [{0 <nil>} {1 101} {1 102}] 2
1 --test clear--
TEST: FOLLOWER 2 CRASH
2 [{0 <nil>} {1 101} {1 102}] 2
2 --test clear--
TEST: 0 RECONNECT
TEST: 1 RESTART + CONNECT
1 loaded state | currentTerm= 1 | votedFor= 1 | log= [{0 <nil>}]
1 → follower | init
TEST: 103 goes in
1 input x 103
0 input x 103
1 input x 103
0 input x 103
1 input x 103
0 input x 103
1 input x 103
0 input x 103
0 → candidate | timeout
0 x follower
0 saved
0 requested votes | 2
RequestVote: 0 > 2
RequestVote: 0 > 1
1 saved
1 - follower | tS fail (RequestVote receiver)
voter: index 0 term 0 | candidate: index: 1 term: 1
1 saved
RequestVote: 0 < 1 | 2 vs 1 | react true | vote: true
RequestVote: 0 - 1 | 2 vs 1
0 received votes
0 → leader | elected (2 votes; term 2)
H> 0 2 1
AppendEntries: 0 > 2
AppendEntries: 0 > 1
AppendEntries: 0 < 1 | 2 vs 2 | react true | success false
2 - follower | reset
AppendEntries: 0 - 1 | 2 vs 2
1 input x 103
0 input o 2 103
H< 0 2 1
H- 0 2 1 | next [2 1 1] | match [0 0 0] | commit 1 | log [{0 <nil>} {1 101} {2 103}] | time 0.0508433
H> 0 2 2
AppendEntries: 0 > 2
AppendEntries: 0 > 1
1 saved
AppendEntries: 0 < 1 | 2 vs 2 | react true | success true
1 - follower | reset
1 output 1 : 101
AppendEntries: 0 - 1 | 2 vs 2
H< 0 2 2
H- 0 2 2 | next [2 3 1] | match [0 2 0] | commit 2 | log [{0 <nil>} {1 101} {2 103}] | time 0.0508854
H> 0 2 3
AppendEntries: 0 > 2
0 output 2 : 103
AppendEntries: 0 > 1
1 saved
AppendEntries: 0 < 1 | 2 vs 2 | react true | success true
1 - follower | reset
1 output 2 : 103
AppendEntries: 0 - 1 | 2 vs 2
2018/08/25 23:09:51 apply error: commit index=2 server=0 103 != server=2 102
exit status 1
FAIL	raft	1.487s
