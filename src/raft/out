0 → follower | init
1 → follower | init
2 → follower | init
3 → follower | init
4 → follower | init
Test (2B): basic agreement ...
1 input x 100
2 input x 100
3 input x 100
4 input x 100
0 input x 100
1 input x 100
2 input x 100
3 input x 100
2 → candidate | timeout
2 x follower
2 requested votes | 1
RequestVote: 2 > 4
0 → candidate | timeout
0 x follower
0 requested votes | 1
RequestVote: 0 > 4
RequestVote: 0 > 1
1 - follower | tS fail (RequestVote receiver)
RequestVote: 0 < 1 | 1 vs 0 | vote: true
RequestVote: 0 - 1 | 1 vs 0
RequestVote: 0 > 2
RequestVote: 0 < 2 | 1 vs 1 | vote: false
RequestVote: 0 - 2 | 1 vs 1
RequestVote: 0 > 3
3 - follower | tS fail (RequestVote receiver)
RequestVote: 0 < 3 | 1 vs 0 | vote: true
RequestVote: 0 - 3 | 1 vs 0
1 → candidate | timeout
1 x follower
1 requested votes | 2
RequestVote: 1 > 4
4 - follower | tS fail (RequestVote receiver)
RequestVote: 2 > 1
RequestVote: 2 < 1 | 1 vs 2 | vote: false
2 → follower | tS fail (RequestVote sender)
RequestVote: 2 - 1 | 1 vs 2
RequestVote: 2 > 0
RequestVote: 2 < 4 | 1 vs 2 | vote: false
RequestVote: 2 < 0 | 1 vs 1 | vote: false
RequestVote: 2 - 4 | 2 vs 2
RequestVote: 2 - 0 | 2 vs 1
RequestVote: 1 < 4 | 2 vs 0 | vote: true
RequestVote: 1 - 4 | 2 vs 0
RequestVote: 2 > 3
RequestVote: 2 < 3 | 1 vs 1 | vote: false
RequestVote: 2 - 3 | 2 vs 1
2 received votes
2 x candidate | check 2
0 received votes
0 → leader | elected (3 votes; term 1)
AppendEntries: 0 > 4
RequestVote: 1 > 0
0 → follower | tS fail (RequestVote receiver)
RequestVote: 1 < 0 | 2 vs 1 | vote: true
RequestVote: 1 - 0 | 2 vs 1
1 received votes
1 → leader | elected (3 votes; term 2)
AppendEntries: 1 > 4
AppendEntries: 1 < 4 | 2 vs 2
AppendEntries: 1 - 4 | 2 vs 2
RequestVote: 1 > 2
RequestVote: 1 < 2 | 2 vs 2 | vote: true
RequestVote: 1 - 2 | 2 vs 2
RequestVote: 1 > 3
3 - follower | tS fail (RequestVote receiver)
RequestVote: 1 < 3 | 2 vs 1 | vote: true
RequestVote: 0 < 4 | 1 vs 2 | vote: false
RequestVote: 0 - 4 | 2 vs 2
AppendEntries: 0 > 1
4 input x 100
0 input x 100
AppendEntries: 0 > 3
AppendEntries: 0 < 3 | 2 vs 2
AppendEntries: 0 - 3 | 2 vs 2
1 input o 2 100
1 input x 100
3 - follower | reset
RequestVote: 1 - 3 | 2 vs 1
AppendEntries: 0 > 2
AppendEntries: 0 < 2 | 2 vs 2
AppendEntries: 0 - 2 | 2 vs 2
AppendEntries: 0 < 1 | 2 vs 2
AppendEntries: 0 - 1 | 2 vs 2
3 - follower | reset
3 - follower | reset
3 - follower | reset
0 x leader (2)
AppendEntries: 1 > 2
AppendEntries: 1 > 3
AppendEntries: 1 < 3 | 2 vs 2
AppendEntries: 1 - 3 | 2 vs 2
3 - follower | reset
3 - follower | reset
AppendEntries: 0 < 4 | 1 vs 2
H 1 2 1 | nextIndex [1 1 1 1 1] | matchIndex [0 0 0 0 0] | lastLogIndex 0
AppendEntries: 1 > 4
4 → candidate | timeout
4 x follower
AppendEntries: 1 < 4 | 2 vs 2
AppendEntries: 1 - 4 | 2 vs 2
AppendEntries: 1 > 0
4 requested votes | 3
RequestVote: 4 > 3
0 x candidate
3 - follower | tS fail (RequestVote receiver)
RequestVote: 4 < 3 | 3 vs 2 | vote: true
RequestVote: 4 - 3 | 3 vs 2
RequestVote: 4 > 2
2 - follower | tS fail (RequestVote receiver)
RequestVote: 4 < 2 | 3 vs 2 | vote: true
RequestVote: 4 - 2 | 3 vs 2
AppendEntries: 1 < 2 | 2 vs 3
1 → follower | tS fail (AppendEntries sender)
AppendEntries: 1 - 2 | 2 vs 3
AppendEntries: 1 > 2
3 - follower | reset
3 - follower | reset
AppendEntries: 1 < 2 | 3 vs 3
AppendEntries: 1 - 2 | 3 vs 3
RequestVote: 4 > 0
0 - follower | tS fail (RequestVote receiver)
RequestVote: 4 < 0 | 3 vs 2 | vote: true
RequestVote: 4 - 0 | 3 vs 2
AppendEntries: 1 > 3
AppendEntries: 1 < 3 | 3 vs 3
AppendEntries: 1 - 3 | 3 vs 3
3 - follower | reset
3 - follower | reset
AppendEntries: 0 - 4 | 3 vs 2
AppendEntries: 1 > 0
AppendEntries: 1 < 0 | 3 vs 3
AppendEntries: 1 - 0 | 3 vs 3
1 x leader (2)
1 x candidate
3 - follower | reset
RequestVote: 4 > 1
4 received votes
4 → leader | elected (3 votes; term 3)
AppendEntries: 4 > 3
AppendEntries: 4 < 3 | 3 vs 3
AppendEntries: 4 - 3 | 3 vs 3
1 - follower | reset
2 - follower | reset
AppendEntries: 1 < 0 | 2 vs 3
AppendEntries: 4 > 0
3 - follower | reset
AppendEntries: 1 - 0 | 3 vs 3
1 - follower | reset
H 4 3 1 | nextIndex [1 1 1 1 1] | matchIndex [0 0 0 0 0] | lastLogIndex 0
AppendEntries: 4 > 3
AppendEntries: 4 < 0 | 3 vs 3
AppendEntries: 4 - 0 | 3 vs 3
AppendEntries: 4 > 2
AppendEntries: 4 < 2 | 3 vs 3
AppendEntries: 4 - 2 | 3 vs 3
AppendEntries: 4 > 1
AppendEntries: 4 < 1 | 3 vs 3
AppendEntries: 4 - 1 | 3 vs 3
RequestVote: 4 < 1 | 3 vs 3 | vote: true
RequestVote: 4 - 1 | 3 vs 3
AppendEntries: 4 > 0
AppendEntries: 4 < 0 | 3 vs 3
AppendEntries: 4 > 1
AppendEntries: 4 > 2
AppendEntries: 4 < 2 | 3 vs 3
0 - follower | reset
1 - follower | reset
3 - follower | reset
H 4 3 2 | nextIndex [1 1 1 1 1] | matchIndex [0 0 0 0 0] | lastLogIndex 0
AppendEntries: 4 > 3
AppendEntries: 4 < 3 | 3 vs 3
AppendEntries: 4 - 3 | 3 vs 3
0 - follower | reset
2 - follower | reset
3 - follower | reset
AppendEntries: 4 > 0
AppendEntries: 4 < 0 | 3 vs 3
AppendEntries: 4 > 1
AppendEntries: 4 > 2
AppendEntries: 4 < 2 | 3 vs 3
0 - follower | reset
2 - follower | reset
3 - follower | reset
AppendEntries: 4 < 3 | 3 vs 3
AppendEntries: 4 - 3 | 3 vs 3
0 - follower | reset
2 - follower | reset
3 → candidate | timeout
3 x follower
3 requested votes | 4
RequestVote: 3 > 4
4 → follower | tS fail (RequestVote receiver)
RequestVote: 3 < 4 | 4 vs 3 | vote: true
4 x leader (2)
4 x candidate
AppendEntries: 4 - 0 | 4 vs 3
AppendEntries: 4 - 2 | 4 vs 3
AppendEntries: 4 - 2 | 4 vs 3
AppendEntries: 4 - 0 | 4 vs 3
RequestVote: 3 - 4 | 4 vs 3
AppendEntries: 4 < 1 | 3 vs 3
AppendEntries: 4 - 1 | 4 vs 3
RequestVote: 3 > 2
2 - follower | tS fail (RequestVote receiver)
RequestVote: 3 < 2 | 4 vs 3 | vote: true
RequestVote: 3 - 2 | 4 vs 3
3 received votes
3 → leader | elected (3 votes; term 4)
RequestVote: 3 > 1
1 - follower | tS fail (RequestVote receiver)
RequestVote: 3 < 1 | 4 vs 3 | vote: true
RequestVote: 3 - 1 | 4 vs 3
AppendEntries: 4 < 1 | 3 vs 3
AppendEntries: 4 - 1 | 4 vs 3
RequestVote: 3 > 0
AppendEntries: 3 > 4
AppendEntries: 3 < 4 | 4 vs 4
AppendEntries: 3 - 4 | 4 vs 4
AppendEntries: 3 > 0
1 - follower | reset
0 [{0 <nil>}] 0
0 --test clear--
H 3 4 1 | nextIndex [1 1 1 1 1] | matchIndex [0 0 0 0 0] | lastLogIndex 0
AppendEntries: 3 > 4
AppendEntries: 3 < 4 | 4 vs 4
AppendEntries: 3 - 4 | 4 vs 4
AppendEntries: 3 > 0
AppendEntries: 3 > 2
2 - follower | reset
H 3 4 2 | nextIndex [1 1 1 1 1] | matchIndex [0 0 0 0 0] | lastLogIndex 0
4 - follower | reset
AppendEntries: 3 > 1
AppendEntries: 3 > 4
AppendEntries: 3 < 4 | 4 vs 4
AppendEntries: 3 - 4 | 4 vs 4
AppendEntries: 3 < 2 | 4 vs 4
AppendEntries: 3 - 2 | 4 vs 4
1 - follower | reset
AppendEntries: 3 > 1
AppendEntries: 3 > 0
AppendEntries: 3 > 1
AppendEntries: 3 > 2
AppendEntries: 3 < 2 | 4 vs 4
AppendEntries: 3 - 2 | 4 vs 4
2 - follower | reset
AppendEntries: 3 > 2
AppendEntries: 3 < 2 | 4 vs 4
AppendEntries: 3 - 2 | 4 vs 4
4 - follower | reset
H 3 4 3 | nextIndex [1 1 1 1 1] | matchIndex [0 0 0 0 0] | lastLogIndex 0
AppendEntries: 3 > 0
AppendEntries: 3 > 1
AppendEntries: 3 > 2
AppendEntries: 3 < 2 | 4 vs 4
AppendEntries: 3 - 2 | 4 vs 4
AppendEntries: 3 > 4
AppendEntries: 3 < 4 | 4 vs 4
AppendEntries: 3 - 4 | 4 vs 4
2 - follower | reset
4 - follower | reset
1 [{0 <nil>}] 0
1 --test clear--
H 3 4 4 | nextIndex [1 1 1 1 1] | matchIndex [0 0 0 0 0] | lastLogIndex 0
AppendEntries: 3 > 4
AppendEntries: 3 > 1
AppendEntries: 3 < 4 | 4 vs 4
AppendEntries: 3 > 2
AppendEntries: 3 - 4 | 4 vs 4
2 - follower | reset
AppendEntries: 3 > 0
H 3 4 5 | nextIndex [1 1 1 1 1] | matchIndex [0 0 0 0 0] | lastLogIndex 0
AppendEntries: 3 > 4
AppendEntries: 3 > 1
AppendEntries: 3 > 0
AppendEntries: 3 < 4 | 4 vs 4
AppendEntries: 3 - 4 | 4 vs 4
4 - follower | reset
AppendEntries: 3 > 2
2 [{0 <nil>}] 0
2 --test clear--
3 [{0 <nil>}] 0
3 --test clear--
4 [{0 <nil>}] 0
4 --test clear--
--- FAIL: TestBasicAgree2B1 (5.46s)
	config.go:465: one(100) failed to reach agreement
FAIL
exit status 1
FAIL	raft	5.544s
